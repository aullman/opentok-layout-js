!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.initLayoutContainer=i():t.initLayoutContainer=i()}("undefined"!=typeof self?self:this,(function(){return function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(o,n,function(i){return t[i]}.bind(null,n));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=1)}([function(t,i,e){"use strict";var o=function(t,i,e,o,n,r,a){for(var d=void 0,h=void 0,f=void 0,s=void 0,l=void 0,c=void 0,g=void 0,u=void 0,v=1;v<=n;v+=1){var m=v,p=Math.ceil(n/m);(u=(g=Math.floor(o/p))/(c=Math.floor(e/m)))>i?g=c*(u=i):u<t&&(c=g/(u=t));var x=(c=Math.min(r,c))*(g=Math.min(a,g))*n;(void 0===d||x>=d)&&(d=x,s=g,l=c,h=m,f=p)}return{maxArea:d,targetCols:h,targetRows:f,targetHeight:s,targetWidth:l,ratio:s/l}},n=function(t,i){var e=t.maxRatio,n=t.minRatio,r=t.fixedRatio,a=t.containerWidth,d=t.containerHeight,h=t.offsetLeft,f=void 0===h?0:h,s=t.offsetTop,l=void 0===s?0:s,c=t.alignItems,g=void 0===c?"center":c,u=t.maxWidth,v=void 0===u?1/0:u,m=t.maxHeight,p=void 0===m?1/0:m,x=t.scaleLastRow,b=void 0===x||x,y=i.map((function(t){return t.height/t.width})),w=y.length,R=w>0?y.reduce((function(t,i){return t+i}),0)/w:1,H=void 0;if(r){var W=w>0?R:null;H=o(W,W,a,d,w,v,p)}else H=o(n,e,a,d,w,v,p);for(var L=0,M=0,T=[],S=void 0,I=[],O=0;O<y.length;O+=1){O%H.targetCols==0&&(S={ratios:[],width:0,height:0},T.push(S));var j=y[O];S.ratios.push(j);var _=H.targetWidth,A=H.targetHeight;r&&(_=A/R),S.width+=_,S.height=A}for(var C=0,P=0,k=0;k<T.length;k+=1)(S=T[k]).width>a?(S.height=Math.floor(S.height*(a/S.width)),S.width=a):S.width<a&&S.height<p&&(P+=1),C+=S.height;if(b&&C<d&&P>0){var E=d-C;C=0;for(var q=0;q<T.length;q+=1){if((S=T[q]).width<a){var B=E/P;B/S.height>(a-S.width)/S.width&&(B=Math.floor((a-S.width)/S.width*S.height)),S.width+=Math.floor(B/S.height*S.width),S.height+=B,E-=B,P-=1}C+=S.height}}switch(g){case"start":M=0;break;case"end":M=d-C;break;case"center":default:M=(d-C)/2}for(var N=0;N<T.length;N+=1){S=T[N];var F=void 0;switch(g){case"start":F=0;break;case"end":F=a-S.width;break;case"center":default:F=(a-S.width)/2}L=F;for(var $=void 0,V=0;V<S.ratios.length;V+=1){S.ratios[V];var z=H.targetWidth;$=S.height,r?z=Math.floor($/R):$/z!=H.targetHeight/H.targetWidth&&(z=Math.floor(H.targetWidth/H.targetHeight*$)),I.push({left:L+f,top:M+l,width:z,height:$}),L+=z}M+=$}return I};t.exports=function(t,i){var e,o=t.maxRatio,r=void 0===o?1.5:o,a=t.minRatio,d=void 0===a?9/16:a,h=t.fixedRatio,f=void 0!==h&&h,s=t.bigPercentage,l=void 0===s?.8:s,c=t.bigFixedRatio,g=void 0!==c&&c,u=t.bigMaxRatio,v=void 0===u?1.5:u,m=t.bigMinRatio,p=void 0===m?9/16:m,x=t.bigFirst,b=void 0===x||x,y=t.containerWidth,w=void 0===y?640:y,R=t.containerHeight,H=void 0===R?480:R,W=t.alignItems,L=void 0===W?"center":W,M=t.bigAlignItems,T=void 0===M?"center":M,S=t.smallAlignItems,I=void 0===S?"center":S,O=t.maxWidth,j=void 0===O?1/0:O,_=t.maxHeight,A=void 0===_?1/0:_,C=t.smallMaxWidth,P=void 0===C?1/0:C,k=t.smallMaxHeight,E=void 0===k?1/0:k,q=t.bigMaxWidth,B=void 0===q?1/0:q,N=t.bigMaxHeight,F=void 0===N?1/0:N,$=t.scaleLastRow,V=void 0===$||$,z=t.bigScaleLastRow,D=void 0===z||z,G=H/w,J=0,K=0,Q=0,U=0,X=[],Y=i.filter((function(t,i){return!!t.big&&(X.push(i),!0)})),Z=i.filter((function(t){return!t.big})),tt=[],it=[];if(Y.length>0&&Z.length>0){var et=void 0,ot=void 0,nt=!0===b;G>(e=Y[0]).height/e.width?(et=w,Q=H-(K=ot=Math.floor(H*l)),"column"===b?nt=!1:"row"===b&&(nt=!0)):(ot=H,U=w-(J=et=Math.floor(w*l)),"column"===b?nt=!0:"row"===b&&(nt=!1)),nt?(tt=n({containerWidth:et,containerHeight:ot,offsetLeft:0,offsetTop:0,fixedRatio:g,minRatio:p,maxRatio:v,alignItems:T,maxWidth:B,maxHeight:F,scaleLastRow:D},Y),it=n({containerWidth:w-J,containerHeight:H-K,offsetLeft:J,offsetTop:K,fixedRatio:f,minRatio:d,maxRatio:r,alignItems:I,maxWidth:P,maxHeight:E,scaleLastRow:V},Z)):(it=n({containerWidth:w-J,containerHeight:H-K,offsetLeft:0,offsetTop:0,fixedRatio:f,minRatio:d,maxRatio:r,alignItems:I,maxWidth:P,maxHeight:E,scaleLastRow:V},Z),tt=n({containerWidth:et,containerHeight:ot,offsetLeft:U,offsetTop:Q,fixedRatio:g,minRatio:p,alignItems:T,maxWidth:B,maxHeight:F,scaleLastRow:D},Y))}else Y.length>0&&0===Z.length?tt=n({containerWidth:w,containerHeight:H,fixedRatio:g,minRatio:p,maxRatio:v,alignItems:T,maxWidth:B,maxHeight:F,scaleLastRow:D},Y):it=n({containerWidth:w-J,containerHeight:H-K,offsetLeft:J,offsetTop:K,fixedRatio:f,minRatio:d,maxRatio:r,alignItems:L,maxWidth:j,maxHeight:A,scaleLastRow:V},Z);var rt=[],at=0,dt=0;return i.forEach((function(t,i){X.indexOf(i)>-1?(rt[i]=tt[at],at+=1):(rt[i]=it[dt],dt+=1)})),rt}},function(t,i,e){"use strict";
/*!
 *  opentok-layout-js (http://github.com/aullman/opentok-layout-js)
 *
 *  Automatic layout of video elements (publisher and subscriber) minimising
 *  white-space for the OpenTok on WebRTC API.
 *
 *  @Author: Adam Ullman (http://github.com/aullman)
 *  @Copyright (c) 2014 Adam Ullman
 *  @License: Released under the MIT license (http://opensource.org/licenses/MIT)
 * */var o=e(0),n=e(2);t.exports=function(t,i){var e=i&&i.window||("undefined"==typeof window?void 0:window);return t="string"==typeof t?e.document.querySelector(t):t,void 0===(e&&e.HTMLElement)||t instanceof e.HTMLElement||i?i||(i={}):i=t,{layout:n.bind(this,t,i),getLayout:o.bind(this,i)}}},function(t,i,e){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=e(0);t.exports=function(t,i){function e(t,n,r){if(r)return t.style[n]=r,NaN;if("object"===(void 0===n?"undefined":o(n)))return Object.keys(n).forEach((function(i){e(t,i,n[i])})),NaN;var a=(i&&i.window||window).getComputedStyle(t).getPropertyValue(n);return""===a&&(a=t.style[n]),a}var r=function(t,i){var o=e(t,i);return o?parseInt(o,10):0},a=i.animate,d=void 0!==a&&a,h=i.bigClass,f=void 0===h?"OT_big":h,s=i.ignoreClass,l=void 0===s?"OT_ignore":s;if("none"!==e(t,"display")){var c,g,u=t.getAttribute("id");u||(u="OT_"+(1e8*Math.random()).toFixed(0),t.setAttribute("id",u)),i.containerHeight=((g=(c=t).offsetHeight>0?c.offsetHeight+"px":e(c,"height"))?parseInt(g,10):0)-r(t,"borderTop")-r(t,"borderBottom"),i.containerWidth=function(t){var i,o=(i=t).offsetWidth>0?i.offsetWidth+"px":e(i,"width");return o?parseInt(o,10):0}(t)-r(t,"borderLeft")-r(t,"borderRight");var v=Array.prototype.filter.call(t.querySelectorAll("#"+u+">*:not(."+l+")"),(function(t){return"none"!==e(t,"display")})),m=v.map((function(t){var i=function(t){if(t){if(t.videoHeight&&t.videoWidth)return{height:t.videoHeight,width:t.videoWidth};var i=t.querySelector("video");if(i&&i.videoHeight&&i.videoWidth)return{height:i.videoHeight,width:i.videoWidth}}return{height:480,width:640}}(t);return i.big=t.classList.contains(f),i}));n(i,m).forEach((function(t,o){var n=v[o];e(n,"position","absolute");var a=t.width-r(n,"paddingLeft")-r(n,"paddingRight")-r(n,"marginLeft")-r(n,"marginRight")-r(n,"borderLeft")-r(n,"borderRight"),h=t.height-r(n,"paddingTop")-r(n,"paddingBottom")-r(n,"marginTop")-r(n,"marginBottom")-r(n,"borderTop")-r(n,"borderBottom");!function(t,i,o,n,r,a,d){var h=this,f={left:i+"px",top:o+"px",width:n+"px",height:r+"px"},s=function(){var i=t.querySelector(".OT_root");if(i){var e=i.style.width;i.style.width=n+"px",i.style.width=e||""}};a&&"undefined"!=typeof $?($(t).stop(),$(t).animate(f,a.duration||200,a.easing||"swing",(function(){s(),a.complete&&a.complete.call(h),d&&d(t,{left:i,top:o,width:n,height:r})}))):(e(t,f),t.classList.contains("ot-layout")||t.classList.add("ot-layout"),d&&d(t,{left:i,top:o,width:n,height:r})),s()}(n,t.left,t.top,a,h,d,i.onLayout)}))}}}])}));
//# sourceMappingURL=opentok-layout.min.js.map