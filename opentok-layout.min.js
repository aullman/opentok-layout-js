!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.initLayoutContainer=e():t.initLayoutContainer=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";var o=function(t,e,i,o,r,n,a){for(var h=void 0,d=void 0,f=void 0,l=void 0,g=void 0,s=void 0,u=void 0,c=void 0,v=1;v<=r;v+=1){var p=v,m=Math.ceil(r/p);(c=(u=Math.floor(o/m))/(s=Math.floor(i/p)))>e?u=s*(c=e):c<t&&(s=u/(c=t));var b=(s=Math.min(n,s))*(u=Math.min(a,u))*r;(void 0===h||b>=h)&&(b===h&&r%(p*m)>r%(f*d)||(h=b,l=u,g=s,d=p,f=m))}return{maxArea:h,targetCols:d,targetRows:f,targetHeight:l,targetWidth:g,ratio:l/g}},r=function(t,e){var i=t.maxRatio,r=t.minRatio,n=t.fixedRatio,a=t.containerWidth,h=t.containerHeight,d=t.offsetLeft,f=void 0===d?0:d,l=t.offsetTop,g=void 0===l?0:l,s=t.alignItems,u=void 0===s?"center":s,c=t.maxWidth,v=void 0===c?1/0:c,p=t.maxHeight,m=void 0===p?1/0:p,b=t.scaleLastRow,w=void 0===b||b,y=e.map((function(t){return t.height/t.width})),x=y.length,M=void 0;if(n){var H=y.length>0?y[0]:null;M=o(H,H,a,h,x,v,m)}else M=o(r,i,a,h,x,v,m);for(var W=0,R=0,L=[],S=void 0,O=[],j=0;j<y.length;j+=1){j%M.targetCols==0&&(S={ratios:[],width:0,height:0},L.push(S));var T=y[j];S.ratios.push(T);var _=M.targetWidth,C=M.targetHeight;n&&(_=C/T),S.width+=_,S.height=C}for(var I=0,P=0,A=0;A<L.length;A+=1)(S=L[A]).width>a?(S.height=Math.floor(S.height*(a/S.width)),S.width=a):S.width<a&&S.height<m&&(P+=1),I+=S.height;if(w&&I<h&&P>0){var k=h-I;I=0;for(var E=0;E<L.length;E+=1){if((S=L[E]).width<a){var q=k/P;q/S.height>(a-S.width)/S.width&&(q=Math.floor((a-S.width)/S.width*S.height)),S.width+=Math.floor(q/S.height*S.width),S.height+=q,k-=q,P-=1}I+=S.height}}switch(u){case"start":R=0;break;case"end":R=h-I;break;case"center":default:R=(h-I)/2}for(var N=0;N<L.length;N+=1){S=L[N];var F=void 0;switch(u){case"start":F=0;break;case"end":F=a-S.width;break;case"center":default:F=(a-S.width)/2}W=F;for(var $=void 0,z=0;z<S.ratios.length;z+=1){var B=S.ratios[z],V=M.targetWidth;$=S.height,n?V=Math.floor($/B):$/V!=M.targetHeight/M.targetWidth&&(V=Math.floor(M.targetWidth/M.targetHeight*$)),O.push({left:W+f,top:R+g,width:V,height:$}),W+=V}R+=$}return O};t.exports=function(t,e){var i,n=t.maxRatio,a=void 0===n?1.5:n,h=t.minRatio,d=void 0===h?9/16:h,f=t.fixedRatio,l=void 0!==f&&f,g=t.bigPercentage,s=void 0===g?.8:g,u=t.minBigPercentage,c=void 0===u?0:u,v=t.bigFixedRatio,p=void 0!==v&&v,m=t.bigMaxRatio,b=void 0===m?1.5:m,w=t.bigMinRatio,y=void 0===w?9/16:w,x=t.bigFirst,M=void 0===x||x,H=t.containerWidth,W=void 0===H?640:H,R=t.containerHeight,L=void 0===R?480:R,S=t.alignItems,O=void 0===S?"center":S,j=t.bigAlignItems,T=void 0===j?"center":j,_=t.smallAlignItems,C=void 0===_?"center":_,I=t.maxWidth,P=void 0===I?1/0:I,A=t.maxHeight,k=void 0===A?1/0:A,E=t.smallMaxWidth,q=void 0===E?1/0:E,N=t.smallMaxHeight,F=void 0===N?1/0:N,$=t.bigMaxWidth,z=void 0===$?1/0:$,B=t.bigMaxHeight,V=void 0===B?1/0:B,D=t.scaleLastRow,G=void 0===D||D,J=t.bigScaleLastRow,K=void 0===J||J,Q=L/W,U=0,X=0,Y=0,Z=0,tt=[],et=e.filter((function(t,e){return!!t.big&&(tt.push(e),!0)})),it=e.filter((function(t){return!t.big})),ot=[],rt=[],nt={};if(et.length>0&&it.length>0){var at=void 0,ht=void 0,dt=!0===M;if(Q>(i=et[0]).height/i.width){if(at=W,ht=Math.floor(L*s),c>0){var ft=void 0;if(p){var lt=et[0].height/et[0].width;ft=o(lt,lt,at,ht,et.length,z,V)}else ft=o(y,b,at,ht,et.length,z,V);ht=Math.max(L*c,Math.min(ht,ft.targetHeight*ft.targetRows));var gt=o(d,a,W,L-ht,it.length,q,F);ht=Math.max(ht,L-gt.targetRows*gt.targetHeight)}Y=L-(X=ht),"column"===M?dt=!1:"row"===M&&(dt=!0)}else{if(ht=L,at=Math.floor(W*s),c>0){var st=void 0;if(p){var ut=et[0].height/et[0].width;st=o(ut,ut,at,ht,et.length,z,V)}else st=o(y,b,at,ht,et.length,z,V);at=Math.max(W*c,Math.min(at,st.targetWidth*st.targetCols));var ct=o(d,a,W-at,L,it.length,q,F);at=Math.max(at,W-ct.targetCols*ct.targetWidth)}Z=W-(U=at),"column"===M?dt=!0:"row"===M&&(dt=!1)}dt?(nt.big={top:0,left:0,width:at,height:ht},nt.small={top:X,left:U,width:W-U,height:L-X}):(nt.big={left:Z,top:Y,width:at,height:ht},nt.small={top:0,left:0,width:W-U,height:L-X})}else et.length>0&&0===it.length?nt.big={top:0,left:0,width:W,height:L}:nt.small={top:X,left:U,width:W-U,height:L-X};nt.big&&(ot=r({containerWidth:nt.big.width,containerHeight:nt.big.height,offsetLeft:nt.big.left,offsetTop:nt.big.top,fixedRatio:p,minRatio:y,maxRatio:b,alignItems:T,maxWidth:z,maxHeight:V,scaleLastRow:K},et)),nt.small&&(rt=r({containerWidth:nt.small.width,containerHeight:nt.small.height,offsetLeft:nt.small.left,offsetTop:nt.small.top,fixedRatio:l,minRatio:d,maxRatio:a,alignItems:nt.big?C:O,maxWidth:nt.big?q:P,maxHeight:nt.big?F:k,scaleLastRow:G},it));var vt=[],pt=0,mt=0;return e.forEach((function(t,e){tt.indexOf(e)>-1?(vt[e]=ot[pt],pt+=1):(vt[e]=rt[mt],mt+=1)})),{boxes:vt,areas:nt}}},function(t,e,i){"use strict";
/*!
 *  opentok-layout-js (http://github.com/aullman/opentok-layout-js)
 *
 *  Automatic layout of video elements (publisher and subscriber) minimising
 *  white-space for the OpenTok on WebRTC API.
 *
 *  @Author: Adam Ullman (http://github.com/aullman)
 *  @Copyright (c) 2014 Adam Ullman
 *  @License: Released under the MIT license (http://opensource.org/licenses/MIT)
 * */var o=i(0),r=i(2);t.exports=function(t,e){var i=e&&e.window||("undefined"==typeof window?void 0:window);return t="string"==typeof t?i.document.querySelector(t):t,void 0===(i&&i.HTMLElement)||t instanceof i.HTMLElement||e?e||(e={}):e=t,{layout:r.bind(this,t,e),getLayout:o.bind(this,e)}}},function(t,e,i){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=i(0);t.exports=function(t,e){function i(t,r,n){if(n)return t.style[r]=n,NaN;if("object"===(void 0===r?"undefined":o(r)))return Object.keys(r).forEach((function(e){i(t,e,r[e])})),NaN;var a=(e&&e.window||window).getComputedStyle(t).getPropertyValue(r);return""===a&&(a=t.style[r]),a}var n=function(t,e){var o=i(t,e);return o?parseInt(o,10):0},a=e.animate,h=void 0!==a&&a,d=e.bigClass,f=void 0===d?"OT_big":d,l=e.ignoreClass,g=void 0===l?"OT_ignore":l;if("none"!==i(t,"display")){var s,u,c=t.getAttribute("id");c||(c="OT_"+(1e8*Math.random()).toFixed(0),t.setAttribute("id",c)),e.containerHeight=((u=(s=t).offsetHeight>0?s.offsetHeight+"px":i(s,"height"))?parseInt(u,10):0)-n(t,"border-top")-n(t,"border-bottom"),e.containerWidth=function(t){var e,o=(e=t).offsetWidth>0?e.offsetWidth+"px":i(e,"width");return o?parseInt(o,10):0}(t)-n(t,"border-left")-n(t,"border-right");var v=Array.prototype.filter.call(t.querySelectorAll("#"+c+">*:not(."+g+")"),(function(t){return"none"!==i(t,"display")})),p=v.map((function(t){var e=function(t){if(t){if(t.videoHeight&&t.videoWidth)return{height:t.videoHeight,width:t.videoWidth};var e=t.querySelector("video");if(e&&e.videoHeight&&e.videoWidth)return{height:e.videoHeight,width:e.videoWidth}}return{height:480,width:640}}(t);return e.big=t.classList.contains(f),e}));r(e,p).boxes.forEach((function(t,o){var r=v[o];i(r,"position","absolute");var a=t.width-n(r,"margin-left")-n(r,"margin-right")-("border-box"!==i(r,"box-sizing")?n(r,"padding-left")+n(r,"padding-right")+n(r,"border-left")+n(r,"border-right"):0),d=t.height-n(r,"margin-top")-n(r,"margin-bottom")-("border-box"!==i(r,"box-sizing")?n(r,"padding-top")+n(r,"padding-bottom")+n(r,"border-top")+n(r,"border-bottom"):0);!function(t,e,o,r,n,a,h){var d=this,f={left:e+"px",top:o+"px",width:r+"px",height:n+"px"},l=function(){var e=t.querySelector(".OT_root");if(e){var i=e.style.width;e.style.width=r+"px",e.style.width=i||""}};a&&"undefined"!=typeof $?($(t).stop(),$(t).animate(f,a.duration||200,a.easing||"swing",(function(){l(),a.complete&&a.complete.call(d),h&&h(t,{left:e,top:o,width:r,height:n})}))):(i(t,f),t.classList.contains("ot-layout")||t.classList.add("ot-layout"),h&&h(t,{left:e,top:o,width:r,height:n})),l()}(r,t.left,t.top,a,d,h,e.onLayout)}))}}}])}));
//# sourceMappingURL=opentok-layout.min.js.map