!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.initLayoutContainer=e():t.initLayoutContainer=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(o,a,function(e){return t[e]}.bind(null,a));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";e.__esModule=!0;var o=function(t,e,i,o,a,n,r){for(var h,d,f,l,s,g,c,u,v=1;v<=a;v+=1){var p=v,m=Math.ceil(a/p);(u=(c=Math.floor(o/m))/(g=Math.floor(i/p)))>e?c=g*(u=e):u<t&&(g=c/(u=t));var b=(g=Math.min(n,g))*(c=Math.min(r,c))*a;if(void 0===h||b>=h){if(b===h&&p*m%a>f*d%a)continue;h=b,l=c,s=g,d=p,f=m}}return{maxArea:h,targetCols:d,targetRows:f,targetHeight:l,targetWidth:s,ratio:l/s}},a=function(t,e){var i,a=t.maxRatio,n=t.minRatio,r=t.fixedRatio,h=t.containerWidth,d=t.containerHeight,f=t.offsetLeft,l=void 0===f?0:f,s=t.offsetTop,g=void 0===s?0:s,c=t.alignItems,u=void 0===c?"center":c,v=t.maxWidth,p=void 0===v?1/0:v,m=t.maxHeight,b=void 0===m?1/0:m,w=t.scaleLastRow,x=void 0===w||w,y=e.map((function(t){return t.height/t.width})),M=y.length;if(r){var R=y.length>0?y[0]:null;i=o(R,R,h,d,M,p,b)}else i=o(n,a,h,d,M,p,b);for(var H,W=0,L=0,_=[],O=[],j=0;j<y.length;j+=1){j%i.targetCols==0&&(H={ratios:[],elements:[],width:0,height:0},_.push(H));R=y[j];var T=e[j];H.elements.push(T),H.ratios.push(R);var I=i.targetWidth,S=i.targetHeight;(r||T.fixedRatio)&&(I=S/R),H.width+=I,H.height=S}var C=0,P=0;for(j=0;j<_.length;j+=1)(H=_[j]).width>h?(H.height=Math.floor(H.height*(h/H.width)),H.width=h):H.width<h&&H.height<b&&(P+=1),C+=H.height;if(x&&C<d&&P>0){var A=d-C;C=0;for(j=0;j<_.length;j+=1){if((H=_[j]).width<h){var E=A/P;E/H.height>(h-H.width)/H.width&&(E=Math.floor((h-H.width)/H.width*H.height)),H.width+=Math.floor(E/H.height*H.width),H.height+=E,A-=E,P-=1}C+=H.height}}switch(u){case"start":L=0;break;case"end":L=d-C;break;case"center":default:L=(d-C)/2}for(j=0;j<_.length;j+=1){H=_[j];var k=void 0;switch(u){case"start":k=0;break;case"end":k=h-H.width;break;case"center":default:k=(h-H.width)/2}W=k;S=void 0;for(var q=0;q<H.ratios.length;q+=1){R=H.ratios[q],T=H.elements[q],I=i.targetWidth;S=H.height,r||T.fixedRatio?I=Math.floor(S/R):S/I!=i.targetHeight/i.targetWidth&&(I=Math.floor(i.targetWidth/i.targetHeight*S)),O.push({left:W+l,top:L+g,width:I,height:S}),W+=I}L+=S}return O};e.default=function(t,e){var i,n=t.maxRatio,r=void 0===n?1.5:n,h=t.minRatio,d=void 0===h?9/16:h,f=t.fixedRatio,l=void 0!==f&&f,s=t.bigPercentage,g=void 0===s?.8:s,c=t.minBigPercentage,u=void 0===c?0:c,v=t.bigFixedRatio,p=void 0!==v&&v,m=t.bigMaxRatio,b=void 0===m?1.5:m,w=t.bigMinRatio,x=void 0===w?9/16:w,y=t.bigFirst,M=void 0===y||y,R=t.containerWidth,H=void 0===R?640:R,W=t.containerHeight,L=void 0===W?480:W,_=t.alignItems,O=void 0===_?"center":_,j=t.bigAlignItems,T=void 0===j?"center":j,I=t.smallAlignItems,S=void 0===I?"center":I,C=t.maxWidth,P=void 0===C?1/0:C,A=t.maxHeight,E=void 0===A?1/0:A,k=t.smallMaxWidth,q=void 0===k?1/0:k,N=t.smallMaxHeight,F=void 0===N?1/0:N,$=t.bigMaxWidth,z=void 0===$?1/0:$,B=t.bigMaxHeight,V=void 0===B?1/0:B,D=t.scaleLastRow,G=void 0===D||D,J=t.bigScaleLastRow,K=void 0===J||J,Q=L/H,U=0,X=0,Y=0,Z=0,tt=[],et=e.filter((function(t,e){return!!t.big&&(tt.push(e),!0)})),it=e.filter((function(t){return!t.big})),ot=[],at=[],nt={};if(et.length>0&&it.length>0){var rt=void 0,ht=void 0,dt=!0===M;if(Q>(i=et[0]).height/i.width){if(rt=H,ht=Math.floor(L*g),u>0){var ft=void 0;if(p){var lt=et[0].height/et[0].width;ft=o(lt,lt,rt,ht,et.length,z,V)}else ft=o(x,b,rt,ht,et.length,z,V);ht=Math.max(L*u,Math.min(ht,ft.targetHeight*ft.targetRows));var st=a({containerWidth:H,containerHeight:L-ht,offsetLeft:0,offsetTop:0,fixedRatio:l,minRatio:d,maxRatio:r,alignItems:S,maxWidth:q,maxHeight:F,scaleLastRow:G},it),gt=0,ct=void 0;st.forEach((function(t){ct!==t.top&&(ct=t.top,gt+=t.height)})),ht=Math.max(ht,L-gt)}Y=L-(X=ht),"column"===M?dt=!1:"row"===M&&(dt=!0)}else{if(ht=L,rt=Math.floor(H*g),u>0){ft=void 0;if(p){lt=et[0].height/et[0].width;ft=o(lt,lt,rt,ht,et.length,z,V)}else ft=o(x,b,rt,ht,et.length,z,V);rt=Math.max(H*u,Math.min(rt,ft.targetWidth*ft.targetCols));var ut=a({containerWidth:H-rt,containerHeight:L,offsetLeft:0,offsetTop:0,fixedRatio:l,minRatio:d,maxRatio:r,alignItems:S,maxWidth:q,maxHeight:F,scaleLastRow:G},it),vt=0,pt=0,mt=0;ut.forEach((function(t){t.top!==mt&&(pt=0,mt=t.top),pt+=t.width,vt=Math.max(vt,pt)})),rt=Math.max(rt,H-vt)}Z=H-(U=rt),"column"===M?dt=!0:"row"===M&&(dt=!1)}dt?(nt.big={top:0,left:0,width:rt,height:ht},nt.small={top:X,left:U,width:H-U,height:L-X}):(nt.big={left:Z,top:Y,width:rt,height:ht},nt.small={top:0,left:0,width:H-U,height:L-X})}else et.length>0&&0===it.length?nt.big={top:0,left:0,width:H,height:L}:nt.small={top:X,left:U,width:H-U,height:L-X};nt.big&&(ot=a({containerWidth:nt.big.width,containerHeight:nt.big.height,offsetLeft:nt.big.left,offsetTop:nt.big.top,fixedRatio:p,minRatio:x,maxRatio:b,alignItems:T,maxWidth:z,maxHeight:V,scaleLastRow:K},et)),nt.small&&(at=a({containerWidth:nt.small.width,containerHeight:nt.small.height,offsetLeft:nt.small.left,offsetTop:nt.small.top,fixedRatio:l,minRatio:d,maxRatio:r,alignItems:nt.big?S:O,maxWidth:nt.big?q:P,maxHeight:nt.big?F:E,scaleLastRow:G},it));var bt=[],wt=0,xt=0;return e.forEach((function(t,e){tt.indexOf(e)>-1?(bt[e]=ot[wt],wt+=1):(bt[e]=at[xt],xt+=1)})),{boxes:bt,areas:nt}}},function(t,e,i){"use strict";
/*!
 *  opentok-layout-js (http://github.com/aullman/opentok-layout-js)
 *
 *  Automatic layout of video elements (publisher and subscriber) minimising
 *  white-space for the OpenTok on WebRTC API.
 *
 *  @Author: Adam Ullman (http://github.com/aullman)
 *  @Copyright (c) 2014 Adam Ullman
 *  @License: Released under the MIT license (http://opensource.org/licenses/MIT)
 * */e.__esModule=!0;var o=i(0),a=i(2);t.exports=function(t,e){var i=e&&e.window||("undefined"==typeof window?void 0:window);return t="string"==typeof t?i.document.querySelector(t):t,void 0===(i&&i.HTMLElement)||t instanceof i.HTMLElement||e?e||(e={}):e=t,{layout:a.default.bind(this,t,e),getLayout:o.default.bind(this,e)}}},function(t,e,i){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var a in e=arguments[i])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};e.__esModule=!0;var a=i(0);e.default=function(t,e){function i(t,o,a){if("string"==typeof o&&a)return t.style[o]=a,NaN;if("object"==typeof o)return Object.keys(o).forEach((function(e){i(t,e,o[e])})),NaN;var n=(e&&e.window||window).getComputedStyle(t).getPropertyValue(o);return""===n&&(n=t.style[o]),n}var n=function(t,e){var o=i(t,e);return o?parseInt(o,10):0},r=e.animate,h=void 0!==r&&r,d=e.bigClass,f=void 0===d?"OT_big":d,l=e.ignoreClass,s=void 0===l?"OT_ignore":l,g=e.fixedRatioClass,c=void 0===g?"OT_fixedRatio":g;if("none"!==i(t,"display")){var u,v,p=t.getAttribute("id");p||(p="OT_".concat((1e8*Math.random()).toFixed(0)),t.setAttribute("id",p)),e.containerHeight=((v=(u=t).offsetHeight>0?"".concat(u.offsetHeight,"px"):i(u,"height"))?parseInt(v,10):0)-n(t,"border-top")-n(t,"border-bottom"),e.containerWidth=function(t){var e,o=(e=t).offsetWidth>0?"".concat(e.offsetWidth,"px"):i(e,"width");return o?parseInt(o,10):0}(t)-n(t,"border-left")-n(t,"border-right");var m=Array.prototype.filter.call(t.querySelectorAll("#".concat(p,">*:not(.").concat(s,")")),(function(t){return"none"!==i(t,"display")})),b=m.map((function(t){return o(o({},function(t){if(t){if(t.videoHeight&&t.videoWidth)return{height:t.videoHeight,width:t.videoWidth};var e=t.querySelector("video");if(e&&e.videoHeight&&e.videoWidth)return{height:e.videoHeight,width:e.videoWidth}}return{height:480,width:640}}(t)),{big:t.classList.contains(f),fixedRatio:t.classList.contains(c)})}));(0,a.default)(e,b).boxes.forEach((function(t,o){var a=m[o];i(a,"position","absolute");var r=t.width-n(a,"margin-left")-n(a,"margin-right")-("border-box"!==i(a,"box-sizing")?n(a,"padding-left")+n(a,"padding-right")+n(a,"border-left")+n(a,"border-right"):0),d=t.height-n(a,"margin-top")-n(a,"margin-bottom")-("border-box"!==i(a,"box-sizing")?n(a,"padding-top")+n(a,"padding-bottom")+n(a,"border-top")+n(a,"border-bottom"):0);!function(t,e,o,a,n,r,h){var d=this,f={left:"".concat(e,"px"),top:"".concat(o,"px"),width:"".concat(a,"px"),height:"".concat(n,"px")},l=function(){var e=t.querySelector(".OT_root");if(e){var i=e.style.width;e.style.width="".concat(a,"px"),e.style.width=i||""}};if(r&&"undefined"!=typeof $){$(t).stop();var s="boolean"==typeof r?{duration:200,easing:"swing"}:r;$(t).animate(f,s.duration,s.easing,(function(){l(),s.complete&&s.complete.call(d),h&&h(t,{left:e,top:o,width:a,height:n})}))}else i(t,f),t.classList.contains("ot-layout")||t.classList.add("ot-layout"),h&&h(t,{left:e,top:o,width:a,height:n});l()}(a,t.left,t.top,r,d,h,e.onLayout)}))}}}])}));
//# sourceMappingURL=opentok-layout.min.js.map