!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.initLayoutContainer=e():t.initLayoutContainer=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";e.__esModule=!0;var o=function(t,e,i,o,r,n,a){for(var h,d,l,f,g,s,c,u,v=1;v<=r;v+=1){var p=v,b=Math.ceil(r/p);(u=(c=Math.floor(o/b))/(s=Math.floor(i/p)))>e?c=s*(u=e):u<t&&(s=c/(u=t));var m=(s=Math.min(n,s))*(c=Math.min(a,c))*r;(void 0===h||m>=h)&&(m===h&&r%(p*b)>r%(l*d)||(h=m,f=c,g=s,d=p,l=b))}return{maxArea:h,targetCols:d,targetRows:l,targetHeight:f,targetWidth:g,ratio:f/g}},r=function(t,e){var i,r=t.maxRatio,n=t.minRatio,a=t.fixedRatio,h=t.containerWidth,d=t.containerHeight,l=t.offsetLeft,f=void 0===l?0:l,g=t.offsetTop,s=void 0===g?0:g,c=t.alignItems,u=void 0===c?"center":c,v=t.maxWidth,p=void 0===v?1/0:v,b=t.maxHeight,m=void 0===b?1/0:b,w=t.scaleLastRow,x=void 0===w||w,y=e.map((function(t){return t.height/t.width})),M=y.length;if(a){var H=y.length>0?y[0]:null;i=o(H,H,h,d,M,p,m)}else i=o(n,r,h,d,M,p,m);for(var W,R=0,_=0,L=[],O=[],j=0;j<y.length;j+=1){j%i.targetCols==0&&(W={ratios:[],width:0,height:0},L.push(W));H=y[j];W.ratios.push(H);var S=i.targetWidth,T=i.targetHeight;a&&(S=T/H),W.width+=S,W.height=T}var C=0,I=0;for(j=0;j<L.length;j+=1)(W=L[j]).width>h?(W.height=Math.floor(W.height*(h/W.width)),W.width=h):W.width<h&&W.height<m&&(I+=1),C+=W.height;if(x&&C<d&&I>0){var P=d-C;C=0;for(j=0;j<L.length;j+=1){if((W=L[j]).width<h){var A=P/I;A/W.height>(h-W.width)/W.width&&(A=Math.floor((h-W.width)/W.width*W.height)),W.width+=Math.floor(A/W.height*W.width),W.height+=A,P-=A,I-=1}C+=W.height}}switch(u){case"start":_=0;break;case"end":_=d-C;break;case"center":default:_=(d-C)/2}for(j=0;j<L.length;j+=1){W=L[j];var k=void 0;switch(u){case"start":k=0;break;case"end":k=h-W.width;break;case"center":default:k=(h-W.width)/2}R=k;T=void 0;for(var E=0;E<W.ratios.length;E+=1){H=W.ratios[E],S=i.targetWidth;T=W.height,a?S=Math.floor(T/H):T/S!=i.targetHeight/i.targetWidth&&(S=Math.floor(i.targetWidth/i.targetHeight*T)),O.push({left:R+f,top:_+s,width:S,height:T}),R+=S}_+=T}return O};e.default=function(t,e){var i,n=t.maxRatio,a=void 0===n?1.5:n,h=t.minRatio,d=void 0===h?9/16:h,l=t.fixedRatio,f=void 0!==l&&l,g=t.bigPercentage,s=void 0===g?.8:g,c=t.minBigPercentage,u=void 0===c?0:c,v=t.bigFixedRatio,p=void 0!==v&&v,b=t.bigMaxRatio,m=void 0===b?1.5:b,w=t.bigMinRatio,x=void 0===w?9/16:w,y=t.bigFirst,M=void 0===y||y,H=t.containerWidth,W=void 0===H?640:H,R=t.containerHeight,_=void 0===R?480:R,L=t.alignItems,O=void 0===L?"center":L,j=t.bigAlignItems,S=void 0===j?"center":j,T=t.smallAlignItems,C=void 0===T?"center":T,I=t.maxWidth,P=void 0===I?1/0:I,A=t.maxHeight,k=void 0===A?1/0:A,E=t.smallMaxWidth,q=void 0===E?1/0:E,N=t.smallMaxHeight,F=void 0===N?1/0:N,$=t.bigMaxWidth,z=void 0===$?1/0:$,B=t.bigMaxHeight,V=void 0===B?1/0:B,D=t.scaleLastRow,G=void 0===D||D,J=t.bigScaleLastRow,K=void 0===J||J,Q=_/W,U=0,X=0,Y=0,Z=0,tt=[],et=e.filter((function(t,e){return!!t.big&&(tt.push(e),!0)})),it=e.filter((function(t){return!t.big})),ot=[],rt=[],nt={};if(et.length>0&&it.length>0){var at=void 0,ht=void 0,dt=!0===M;if(Q>(i=et[0]).height/i.width){if(at=W,ht=Math.floor(_*s),u>0){var lt=void 0;if(p){var ft=et[0].height/et[0].width;lt=o(ft,ft,at,ht,et.length,z,V)}else lt=o(x,m,at,ht,et.length,z,V);ht=Math.max(_*u,Math.min(ht,lt.targetHeight*lt.targetRows));var gt=o(d,a,W,_-ht,it.length,q,F);ht=Math.max(ht,_-gt.targetRows*gt.targetHeight)}Y=_-(X=ht),"column"===M?dt=!1:"row"===M&&(dt=!0)}else{if(ht=_,at=Math.floor(W*s),u>0){lt=void 0;if(p){ft=et[0].height/et[0].width;lt=o(ft,ft,at,ht,et.length,z,V)}else lt=o(x,m,at,ht,et.length,z,V);at=Math.max(W*u,Math.min(at,lt.targetWidth*lt.targetCols));gt=o(d,a,W-at,_,it.length,q,F);at=Math.max(at,W-gt.targetCols*gt.targetWidth)}Z=W-(U=at),"column"===M?dt=!0:"row"===M&&(dt=!1)}dt?(nt.big={top:0,left:0,width:at,height:ht},nt.small={top:X,left:U,width:W-U,height:_-X}):(nt.big={left:Z,top:Y,width:at,height:ht},nt.small={top:0,left:0,width:W-U,height:_-X})}else et.length>0&&0===it.length?nt.big={top:0,left:0,width:W,height:_}:nt.small={top:X,left:U,width:W-U,height:_-X};nt.big&&(ot=r({containerWidth:nt.big.width,containerHeight:nt.big.height,offsetLeft:nt.big.left,offsetTop:nt.big.top,fixedRatio:p,minRatio:x,maxRatio:m,alignItems:S,maxWidth:z,maxHeight:V,scaleLastRow:K},et)),nt.small&&(rt=r({containerWidth:nt.small.width,containerHeight:nt.small.height,offsetLeft:nt.small.left,offsetTop:nt.small.top,fixedRatio:f,minRatio:d,maxRatio:a,alignItems:nt.big?C:O,maxWidth:nt.big?q:P,maxHeight:nt.big?F:k,scaleLastRow:G},it));var st=[],ct=0,ut=0;return e.forEach((function(t,e){tt.indexOf(e)>-1?(st[e]=ot[ct],ct+=1):(st[e]=rt[ut],ut+=1)})),{boxes:st,areas:nt}}},function(t,e,i){"use strict";
/*!
 *  opentok-layout-js (http://github.com/aullman/opentok-layout-js)
 *
 *  Automatic layout of video elements (publisher and subscriber) minimising
 *  white-space for the OpenTok on WebRTC API.
 *
 *  @Author: Adam Ullman (http://github.com/aullman)
 *  @Copyright (c) 2014 Adam Ullman
 *  @License: Released under the MIT license (http://opensource.org/licenses/MIT)
 * */e.__esModule=!0;var o=i(0),r=i(2);t.exports=function(t,e){var i=e&&e.window||("undefined"==typeof window?void 0:window);return t="string"==typeof t?i.document.querySelector(t):t,void 0===(i&&i.HTMLElement)||t instanceof i.HTMLElement||e?e||(e={}):e=t,{layout:r.default.bind(this,t,e),getLayout:o.default.bind(this,e)}}},function(t,e,i){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};e.__esModule=!0;var r=i(0);e.default=function(t,e){function i(t,o,r){if("string"==typeof o&&r)return t.style[o]=r,NaN;if("object"==typeof o)return Object.keys(o).forEach((function(e){i(t,e,o[e])})),NaN;var n=(e&&e.window||window).getComputedStyle(t).getPropertyValue(o);return""===n&&(n=t.style[o]),n}var n=function(t,e){var o=i(t,e);return o?parseInt(o,10):0},a=e.animate,h=void 0!==a&&a,d=e.bigClass,l=void 0===d?"OT_big":d,f=e.ignoreClass,g=void 0===f?"OT_ignore":f;if("none"!==i(t,"display")){var s,c,u=t.getAttribute("id");u||(u="OT_".concat((1e8*Math.random()).toFixed(0)),t.setAttribute("id",u)),e.containerHeight=((c=(s=t).offsetHeight>0?"".concat(s.offsetHeight,"px"):i(s,"height"))?parseInt(c,10):0)-n(t,"border-top")-n(t,"border-bottom"),e.containerWidth=function(t){var e,o=(e=t).offsetWidth>0?"".concat(e.offsetWidth,"px"):i(e,"width");return o?parseInt(o,10):0}(t)-n(t,"border-left")-n(t,"border-right");var v=Array.prototype.filter.call(t.querySelectorAll("#".concat(u,">*:not(.").concat(g,")")),(function(t){return"none"!==i(t,"display")})),p=v.map((function(t){return o(o({},function(t){if(t){if(t.videoHeight&&t.videoWidth)return{height:t.videoHeight,width:t.videoWidth};var e=t.querySelector("video");if(e&&e.videoHeight&&e.videoWidth)return{height:e.videoHeight,width:e.videoWidth}}return{height:480,width:640}}(t)),{big:t.classList.contains(l)})}));(0,r.default)(e,p).boxes.forEach((function(t,o){var r=v[o];i(r,"position","absolute");var a=t.width-n(r,"margin-left")-n(r,"margin-right")-("border-box"!==i(r,"box-sizing")?n(r,"padding-left")+n(r,"padding-right")+n(r,"border-left")+n(r,"border-right"):0),d=t.height-n(r,"margin-top")-n(r,"margin-bottom")-("border-box"!==i(r,"box-sizing")?n(r,"padding-top")+n(r,"padding-bottom")+n(r,"border-top")+n(r,"border-bottom"):0);!function(t,e,o,r,n,a,h){var d=this,l={left:"".concat(e,"px"),top:"".concat(o,"px"),width:"".concat(r,"px"),height:"".concat(n,"px")},f=function(){var e=t.querySelector(".OT_root");if(e){var i=e.style.width;e.style.width="".concat(r,"px"),e.style.width=i||""}};if(a&&"undefined"!=typeof $){$(t).stop();var g="boolean"==typeof a?{duration:200,easing:"swing"}:a;$(t).animate(l,g.duration,g.easing,(function(){f(),g.complete&&g.complete.call(d),h&&h(t,{left:e,top:o,width:r,height:n})}))}else i(t,l),t.classList.contains("ot-layout")||t.classList.add("ot-layout"),h&&h(t,{left:e,top:o,width:r,height:n});f()}(r,t.left,t.top,a,d,h,e.onLayout)}))}}}])}));
//# sourceMappingURL=opentok-layout.min.js.map